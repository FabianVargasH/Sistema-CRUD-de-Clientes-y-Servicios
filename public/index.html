<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Servicios</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-title">
                <img src="./LTC logo.jpeg" alt="Logo" class="header-logo">
                <h1>Gestión de Servicios LTC</h1>
            </div>
            <div class="stats">
                <span id="serviceCount">0 servicios registrados</span>
            </div>
        </header>
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('ingreso')">
                Ingreso de Datos
            </button>
            <button class="tab-btn" onclick="showTab('consultas')">
                Consultas
            </button>
        </div>
        <!-- TAB INGRESO -->
        <div id="tab-ingreso" class="tab-content active">
            <div class="form-card">
                <div class="form-section">
                    <h2>Información General</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nombre *</label>
                            <input type="text" id="nombre" required>
                        </div>
                        <div class="form-group">
                            <label>ID Tipo *</label>
                            <select id="idTipo">
                                <option value="cedula">Cédula</option>
                                <option value="pasaporte">Pasaporte</option>
                                <option value="dimex">DIMEX</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ID Número *</label>
                            <input type="text" id="idNumero" required>
                        </div>
                        <div class="form-group">
                            <label>Correo Electrónico *</label>
                            <input type="email" id="correo" required>
                        </div>
                        <div class="form-group">
                            <label>Teléfono *</label>
                            <input type="tel" id="telefono" required>
                        </div>
                        <div class="form-group">
                            <label>Descripción del Servicio *</label> 
                                <select id="tipoServicio">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="contable">Contable</option>
                                    <option value="tributario">Tributario</option>
                                    <option value="legal">Legal</option>
                                    <option value="notarial">Notarial</option>
                                    <option value="criminologico">Criminológico</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <h2>Descripción del Servicio</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Nombre del Servicio *</label>
                            <input type="text" id="nombreServicio" required>
                        </div>
                        <div class="form-group">
                            <label>Responsable *</label>
                            <input type="text" id="responsable" required>
                        </div>
                        <div class="form-group full-width">
                            <label>Actividades *</label>
                            <textarea id="actividades" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Tiempo de Cumplimiento *</label>
                            <input type="date" id="tiempoCumplimiento" placeholder="ej: 5 días" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Información de Pago</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Monto del Servicio *</label>
                            <input type="number" id="montoServicio" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label>Forma de Pago *</label>
                            <select id="formaPago">
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta">Tarjeta</option>
                                <option value="transferencia">Transferencia</option>
                                <option value="sinpe">SINPE Móvil</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Abonos</label> <!-- ========= Abonos================= -->
                            <input type="number" id="bonos" step="0.01" placeholder="0.00">
                        </div>
                    </div>
                </div>
                <button class="btn-primary" onclick="guardarServicio()">
                    Registrar Servicio
                </button>
            </div>
        </div>
        <!-- TAB CONSULTAS -->
        <div id="tab-consultas" class="tab-content">
            <div class="search-box">
                <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                    <input type="text" id="searchInput" placeholder="Buscar por nombre, ID o servicio..." onkeyup="buscarServicios()" style="flex: 1; min-width: 250px;">
                    <select id="filtroTiempo" onchange="aplicarFiltroTiempo()" class="filtro-tiempo">
                        <option value="" >Filtrar por vencimiento</option>
                        <option value="vencidos">Vencidos</option>
                        <option value="1-semana">Vence en 1 semana</option>
                        <option value="1-mes">Más de 1 semana</option>
                        <option value="mas-1-mes">Más de 1 mes</option>
                    </select>
                    <button class="btn-export" onclick="exportarAPDF()">
                        Exportar a PDF
                    </button>
                </div>
            </div>

            <div id="serviciosList">
                <div class="loading">Cargando servicios...</div>
            </div>
        </div>
    </div>
        <!-- Modal para agregar bono -->
    <div id="modalBono" class="modal-bono">
        <div class="modal-bono-content">
            <div class="modal-bono-header">
                <h3>Agregar Abono</h3>
                <button class="btn-close" onclick="cerrarModalBono()">&times;</button>
            </div>
            
            <div class="modal-bono-info">
                <p><strong>Cliente:</strong> <span id="bonoNombreCliente"></span></p>
                <p><strong>Saldo actual:</strong> <span id="bonoSaldoActual" class="saldo-actual"></span></p>
            </div>
            
            <div class="bono-form-group">
                <label for="montoBono">Monto del abono ($)</label>
                <div class="bono-input-wrapper">
                    <span>$</span>
                    <input type="number" id="montoBono" class="bono-input" placeholder="0.00" step="0.01" min="0.01" required>
                </div>
            </div>
            
            <div class="bono-actions">
                <button class="btn-bono-cancel" onclick="cerrarModalBono()">Cancelar</button>
                <button class="btn-bono-confirm" onclick="procesarBono()">Agregar Abono</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="script.js"></script>
</body>
</html>